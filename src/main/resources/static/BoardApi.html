
  <!DOCTYPE html>
  <html>
  <head>
        <style>
            /* Trello-style board layout */
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
            }
    
            header {
                margin-left: auto; 
                margin: 0;
                text-align: right;
                background-color: #026aa7;
                color: white;
                padding: 10px;
            }
            h3{
                text-align: left;
                font-family: Arial;

            }
    
            .board {
                display: flex;
                padding: 20px;
            }
    
            .column {
                flex: 1;
                background-color: #e2e4e6;
                margin: 0 10px;
                padding: 10px;
                border-radius: 5px;
            }
    
            .column h2 {
                margin-top: 0;
                margin-bottom: 10px;
                color: #333;
            }
    
            .card {
                background-color: white;
                border-radius: 5px;
                padding: 10px;
                margin-bottom: 10px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                cursor: pointer;
            }
    
                .card p {
                    margin: 0;
                    color: #333;
                }
                form, body, header, main, footer, .footer-container, .control-panel {
        margin: 0;
        padding: 0;
    }

            /* ... (Your other CSS styles for cards, columns, etc.) */

            /* Style the footer container */
            .footer-container {
                display: flex;
                justify-content: space-around;
                background-color: #f9f9f9;
                padding: 20px;
            }

            /* Style each control panel */
            .control-panel {
                flex: 1;
                margin: 10px;
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 5px;
                background-color: #fff;
            }

            /* Style the section headings */
            .control-panel h3 {
                font-size: 18px;
                margin-bottom: 10px;
            }

            /* Style the form elements */
            .form-group {
                margin-bottom: 10px;
            }

            .form-group input[type="text"],
            .form-group select {
                width: 100%;
                padding: 5px;
                border: 1px solid #ccc;
                border-radius: 5px;
            }

            .form-group input[type="submit"] {
                width: 100%;
                background-color: #007bff;
                color: #fff;
                border: none;
                padding: 10px;
                cursor: pointer;
                border-radius: 5px;
            }
            /* .btn-primary {
                width: 100%;
                background-color: #007bff;
                color: #fff;
                border: none;
                padding: 10px;
                cursor: pointer;
                border-radius: 5px;
        } */

        </style>
    </head>
    <body>
        <header>
            <div class="header">
                <form id="Title">
                    <input type="text" id="newBoardTitle" placeholder="Enter a new board title" oninput="updateInputValue(this)">
                <input type="submit" id="updateBtn" onclick="updateBoardTitle()" value="Update">
                </form>
            </div>
        </header>
        <script>
                    //Update title of board 
                    function updateBoardTitle() {
                    const newBoardTitleInput = document.getElementById('newBoardTitle');
                    const newTitle = newBoardTitleInput.value;

                    if (newTitle.trim() === '') {
                        alert("Please enter a valid board title.");
                        return;
                    }

                    fetch(`http://localhost:8080/api/boards`, {
                        method: 'PUT',
                        headers: {
                        'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ title: newTitle }),
                    })
                        .then(response => response.json())
                        .then(updatedBoard => {
                        newBoardTitleInput.value = ''; // Clear the input
                        })
                        .catch(error => {
                        console.error('Error updating board title:', error);
                        });
                    }
                            </script>
 <!-- //////////////////////////////////////////////////////////////////////////////    -->
        <div class="board">
            <div class="column"class="section" id="sectionToDo" >
                <h2>To Do</h2>
            </div>
            <div class="column"class="section" id="sectionIn Progress" >
                <h2>In Progress</h2>
            </div>
            <div class="column"class="section" id="section Done">
                <h2>Done</h2>
            </div>
            <footer>
                <div class="control-panel">
    <h5>Create New Card</h5>
    <form class="form-container" id="addCardForm">
        <div class="form-group">
            <input type="text" id="newTitle" name="newTitle" placeholder="Enter Title">
        </div>
        <div class="form-group">
            <input type="text" id="newDescription" name="newDescription" placeholder="Enter Description">
        </div>
        <div class="form-group">
            <select id="newsection" required>
                <option value="0">Select Section</option>
                <option value="1">To Do</option>
                <option value="2">In Progress</option>
                <option value="3">Done</option>
            </select>
        </div>
        <div class="form-group">
            <input name="submit" type="submit" onclick="createCard()" value="Create New Card">
        </div>
    </form>
</div>
<div id="cardsContainer" class="cards-container">
</div>
    <script>
//Update card details *********************************************************************************************
                function createCard()(card, cardContainer) {
                const cardContent = document.createElement('div');
                cardContent.className = 'card-content';

                const cardIdElement = document.createElement('div');
                cardIdElement.className = 'card-id';
                cardIdElement.textContent = `Card ID: ${card.id}`;

                const cardTitleElement = document.createElement('div');
                cardTitleElement.className = 'card-title';
                cardTitleElement.textContent = `Card Title: ${card.title}`;

                const cardDescriptionElement = document.createElement('div');
                cardDescriptionElement.className = 'card-description';
                cardDescriptionElement.textContent = `Card Description: ${card.description}`;

                const updateButton = document.createElement('button');
                updateButton.textContent = 'Update';
                updateButton.addEventListener('click', () => showUpdateForm(card, cardContainer));

                cardContent.appendChild(cardIdElement);
                cardContent.appendChild(cardTitleElement);
                cardContent.appendChild(cardDescriptionElement);
                cardContent.appendChild(updateButton);

                cardContainer.appendChild(cardContent);
                }

                function showUpdateForm(card, cardContainer) {
                const cardContent = cardContainer.querySelector('.card-content');
                cardContent.innerHTML = ''; // Clear existing content

                const cardTitleInput = document.createElement('input');
                cardTitleInput.id = 'updateCardTitleInput';
                cardTitleInput.type = 'text';
                cardTitleInput.value = card.title;

                const cardDescriptionInput = document.createElement('input');
                cardDescriptionInput.id = 'updateCardDescriptionInput';
                cardDescriptionInput.type = 'text';
                cardDescriptionInput.value = card.description;

                const sectionSelect = document.createElement('select');
                sectionSelect.id = 'updateSectionSelect';

                // Fetch and populate the sections for the dropdown
                fetch(`http://localhost:8080/api/boards/1/cards`)
                    .then(response => response.json())
                    .then(sections => {
                    sections.forEach(section => {
                        const option = document.createElement('option');
                        option.value = section.id;
                        option.textContent = section.name;
                        sectionSelect.appendChild(option);
                    });

                    // Pre-select the current section
                    sectionSelect.value = card.section.id;
                    })
                    .catch(error => {
                    console.error('Error fetching sections:', error);
                    });

                const saveButton = document.createElement('button');
                saveButton.textContent = 'Save';
                saveButton.id = 'saveBtn';
                saveButton.addEventListener('click', () => saveUpdatedCard(card.id));

                cardContent.appendChild(cardTitleInput);
                cardContent.appendChild(document.createElement('br')); // New line
                cardContent.appendChild(cardDescriptionInput);
                cardContent.appendChild(document.createElement('br')); // New line
                cardContent.appendChild(sectionSelect);
                cardContent.appendChild(saveButton);
                }

                function saveUpdatedCard(cardId) {
                const updatedTitleInput = document.getElementById('updateCardTitleInput');
                const updatedDescriptionInput = document.getElementById('updateCardDescriptionInput');
                const updatedSectionSelect = document.getElementById('updateSectionSelect');

                const updatedCard = {
                    title: updatedTitleInput.value,
                    description: updatedDescriptionInput.value,
                    section: { id: updatedSectionSelect.value },
                };

                fetch(`http://localhost:8080/api/card/${cardId}`, {
                    method: 'PUT',
                    headers: {
                    'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(updatedCard),
                })
                    .then(response => response.json())
                    .then(updatedCardData => {
                    fetchSectionsAndCardsForBoard(selectedBoardId); // Refresh sections/cards
                    })
                    .catch(error => {
                    console.error('Error updating card:', error);
                    });
                }
                    </script>
 <!-- ///////////////////////////////////////////////////////////////////////////////// -->
        <br>
        <div class="form-group">
            <h5>Delete Card</h5>
            <select id="cardDropdown">
            </select><br>
            <div class="form-group">
                <input id="submit" type="submit" onclick="deleteCard()" value="Delete Card">
            </div>
        </div>
        <div id="cardsContainer"></div>
        <script>
            //Delete card *****************************************************************************************************
            function deleteCard(cardId, cardContainer) {
                const shouldDelete = window.confirm("Are you sure you want to delete this card?");
                if (shouldDelete) {
                    fetch(`http://localhost:8080/api/boards/{boardId}/cards$/{id}`, {
                    method: 'DELETE',
                    })
                    .then(response => {
                        if (response.ok) {
                        cardContainer.remove(); // Remove the card container from the UI
                        } else {
                        console.error('Error deleting card:', response.statusText);
                        }
                    })
                    .catch(error => {
                        console.error('Error deleting card:', error);
                    });
                }
            }


        </script>
        <br>
<!-- /////////////////////////////////////////////////////////////////////////////// -->
        <div class="update-card">
            <h5>Update Card Information</h5>
            <form class="update-form" id="updateCardForm">
                <div class="form-group">
                    <input type="text" id="updateTitle" name="updateTitle" placeholder="Enter New Title">
                </div>
                <div class="form-group">
                    <input type="text" id="updateDescription" name="updateDescription" placeholder="Enter New Description">
                </div>
                <div class="form-group">
                <select id="updateSection" required aria-label="Update Section Select">
                    <option value="0">Select Section</option>
                    <option value="1">To Do</option>
                    <option value="2">In Progress</option>
                    <option value="3">Done</option>
                </select>
                </div>
                <div class="form-group">
                    <input id="submit" type="submit" onclick="UpdateCard()"  value="UpdateCard">
                </div>
            </form>
        </div>
        <div id="cardsContainer">
        </div>
        <script>
      //Update card details 
          function renderCardDetails(card, cardContainer) {
                const cardContent = document.createElement('div');
                cardContent.className = 'update-card';

                const cardTitleElement = document.createElement('div');
                cardTitleElement.className = 'update-card';
                cardTitleElement.textContent = `updateTitle: ${card.title}`;

                const cardDescriptionElement = document.createElement('div');
                cardDescriptionElement.className = 'card-description';
                cardDescriptionElement.textContent = `Card Description: ${card.description}`;
               
                const cardSectionElement = document.createElement('div');
                cardSectionElement.className = 'card-section';
                cardDescriptionElement.textContent = `Card Section: ${card.section}`;

                cardDescriptionElement.className = 'card-description';
                const updateButton = document.createElement('button');
                updateButton.textContent = 'Update';
                updateButton.addEventListener('click', () => showUpdateForm(card,section));

                cardContent.appendChild(cardIdElement);
                cardContent.appendChild(cardTitleElement);
                cardContent.appendChild(cardDescriptionElement);
                cardContent.appendChild(cardSectionElement);
                cardContent.appendChild(updateButton);

                cardContainer.appendChild(cardContent);
                }

                function UpdateCard()(card, cardContainer) {
                const cardContent = cardContainer.querySelector('.card-content');
                cardContent.innerHTML = ''; // Clear existing content

                const cardTitleInput = document.createElement('input');
                cardTitleInput.id = 'updateCardTitleInput';
                cardTitleInput.type = 'text';
                cardTitleInput.value = card.title;

                const cardDescriptionInput = document.createElement('input');
                cardDescriptionInput.id = 'updateCardDescriptionInput';
                cardDescriptionInput.type = 'text';
                cardDescriptionInput.value = card.description;

                const sectionSelect = document.createElement('select');
                sectionSelect.id = 'updateSectionSelect';

                // Fetch and populate the sections for the dropdown
                fetch(`http://localhost:8080/api/board/${selectedBoardId}/section`)
                    .then(response => response.json())
                    .then(sections => {
                    sections.forEach(section => {
                        const option = document.createElement('option');
                        option.value = section.id;
                        option.textContent = section.name;
                        sectionSelect.appendChild(option);
                    });

                    // Pre-select the current section
                    sectionSelect.value = card.section.id;
                    })
                    .catch(error => {
                    console.error('Error fetching sections:', error);
                    });

                const saveButton = document.createElement('button');
                saveButton.textContent = 'Save';
                saveButton.id = 'saveBtn';
                saveButton.addEventListener('click', () => saveUpdatedCard(card.id));

                const cancelButton = document.createElement('button');
                cancelButton.textContent = 'Cancel';
                cancelButton.id = 'cancleBtn';
                cancelButton.addEventListener('click', () => {
                    cardContainer.innerHTML = ''; // Remove the update form
                    renderCardDetails(card, cardContainer);
                });

                cardContent.appendChild(cardTitleInput);
                cardContent.appendChild(document.createElement('br')); // New line
                cardContent.appendChild(cardDescriptionInput);
                cardContent.appendChild(document.createElement('br')); // New line
                cardContent.appendChild(sectionSelect);
                cardContent.appendChild(saveButton);
                cardContent.appendChild(cancelButton);
                }

                function saveUpdatedCard(cardId) {
                const updatedTitleInput = document.getElementById('updateCardTitleInput');
                const updatedDescriptionInput = document.getElementById('updateCardDescriptionInput');
                const updatedSectionSelect = document.getElementById('updateSectionSelect');

                const updatedCard = {
                    title: updatedTitleInput.value,
                    description: updatedDescriptionInput.value,
                    section: { id: updatedSectionSelect.value },
                };

                fetch(`http://localhost:8080/api/card/${cardId}`, {
                    method: 'PUT',
                    headers: {
                    'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(updatedCard),
                })
                    .then(response => response.json())
                    .then(updatedCardData => {
                    fetchSectionsAndCardsForBoard(selectedBoardId); // Refresh sections/cards
                    })
                    .catch(error => {
                    console.error('Error updating card:', error);
                    });
                }


        </script>
  </footer>
 <!-- <script src="Board.js"></script> -->
  </body>
  </html>


   


